"use strict";var app=angular.module("bs-edit",[]);const EMPTY_VALUE="empty";app.directive("bseText",function(){return{restrict:"A",scope:{value:"=bseText",empty:"=?"},template:'<input ng-model="newValue" class="form-control"><span class="form-control" ng-class="{\'bse-empty\' : !value}" ng-bind="value || empty"></span>',link:function(e,t){e.empty=e.empty?e.empty:EMPTY_VALUE,t.addClass("edit-in-place");var n=angular.element(t.children()[0]);t.bind("click",function(){e.newValue=angular.copy(e.value),e.$apply(),t.addClass("active"),n[0].focus()}),n.bind("blur",function(){e.value=e.newValue,e.$apply(),t.removeClass("active")}),n.bind("keydown",function(t){13===t.which&&(this.blur(),t.preventDefault()),27===t.which&&(e.newValue=e.value,this.blur(),t.preventDefault())})}}}),app.directive("bseSelect",function(){var e=function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){e.dispatchEvent(t)},1)};return{restrict:"A",scope:{value:"=bseSelect",onshow:"&",empty:"=?"},template:'<select ng-model="value" class="form-control" ng-options="v.name for v in values track by v.id"></select><span class="form-control" ng-class="{\'bse-empty\' : !value}" ng-bind="value.name || empty"></span>',link:function(t,n){t.empty=t.empty?t.empty:EMPTY_VALUE,n.addClass("edit-in-place");var a=angular.element(n.children()[0]),l=angular.element(n.children()[1]);l.bind("click",function(){t.onshow().then(function(l){t.values=l,n.addClass("active"),a[0].focus(),e(a[0])})}),a.bind("blur",function(){t.$apply(),n.removeClass("active")}),a.bind("change",function(e){this.blur(),e.preventDefault()}),a.bind("keydown",function(e){27===e.which&&(this.blur(),e.preventDefault())})}}}),app.directive("bseTextarea",function(){return{restrict:"A",scope:{value:"=bseTextarea",empty:"=?"},template:'<textarea ng-model="newValue" class="form-control"></textarea><pre ng-class="{\'bse-empty\' : !value}" ng-bind="value || empty"></pre>',link:function(e,t){e.empty=e.empty?e.empty:EMPTY_VALUE,t.addClass("edit-in-place");var n=angular.element(t.children()[0]),a=angular.element(t.children()[1]);a.bind("click",function(){n[0].style.height=t[0].offsetHeight+"px",e.newValue=angular.copy(e.value),e.$apply(),t.addClass("active"),n[0].focus()}),n.bind("blur",function(){e.value=e.newValue,e.$apply(),t.removeClass("active")}),n.bind("keydown",function(t){if(13===t.which){var a=n[0].offsetHeight+20;n[0].style.height=a+"px"}27===t.which&&(e.newValue=e.value,this.blur(),t.preventDefault())})}}}),app.directive("bseDate",function(e){return{restrict:"A",scope:{value:"=bseDate",empty:"=?",locale:"="},template:'<input class="form-control"><span class="form-control" ng-class="{\'bse-empty\' : !value}">{{(value | date: "dd-MM-yyyy") || empty}}</span>',link:function(t,n){function a(){l.datepicker(c).attr("readonly","readonly")}t.empty=t.empty?t.empty:EMPTY_VALUE,n.addClass("edit-in-place");var l=angular.element(n.children()[0]),i=angular.element(n.children()[1]),c={language:t.locale,format:"dd-mm-yyyy",orientation:"bottom auto",todayHighlight:!0,autoclose:!0,clearBtn:!0};t.$watch("locale",function(t){angular.extend(c,{language:t}),e(function(){l.datepicker("remove"),a()})}),i.bind("click",function(){l.datepicker("setDate",t.value),n.addClass("active"),l[0].focus()}),l.bind("hide",function(e){n.removeClass("active"),t.value=e.date,t.$apply()})}}});